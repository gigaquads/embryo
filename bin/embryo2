#!/usr/bin/env python3
# encoding=utf-8
# vim: set filetype=python

from appyratus.utils import SysUtils

from pybiz import Manifest
from pybiz.util import ApplicationRouter

from embryo.api import cli, repl
from embryo.env import EmbryoEnvironment

env = EmbryoEnvironment()


class EmbryoApplicationRouter(ApplicationRouter):
    """
    # Embryo Application Router
    """


def main():
    """
    # Main execution for Embryo command-line interface
    """
    router = EmbryoApplicationRouter(
        manifest=env.manifest_filepath, applications={
            'cli': cli,
            'repl': repl,
        }, default_app='cli',
    )
    router.run()


if __name__ == "__main__":
    SysUtils.safe_main(main, debug_level=1)
